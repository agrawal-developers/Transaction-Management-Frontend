<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Management</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.10/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Initialize users from localStorage or use default users
        const defaultUsers = [
            { username: "superadmin", password: "admin123", role: "Super Master" },
            { username: "master", password: "master123", role: "Master" }
        ];

        const getUsers = () => {
            const storedUsers = localStorage.getItem("users");
            return storedUsers ? JSON.parse(storedUsers) : defaultUsers;
        };

        const saveUsers = (users) => {
            localStorage.setItem("users", JSON.stringify(users));
        };

        // Sample transaction data
        const initialTransactions = [
            { sno: 1, id: "TXN001", customer: "John Doe", amount: 500, fromVPA: "john@upi", payerName: "John", enteredBy: "master" },
            { sno: 2, id: "TXN002", customer: "Jane Smith", amount: 1000, fromVPA: "jane@upi", payerName: "Jane", enteredBy: "master" },
            { sno: 3, id: "TXN003", customer: "Bob Wilson", amount: 300, fromVPA: "bob@upi", payerName: "Bob", enteredBy: "master" },
            { sno: 4, id: "TXN004", customer: "Alice Brown", amount: 200, fromVPA: "alice@upi", payerName: "Alice", enteredBy: "master" }
        ];

        // Sample withdrawal data
        const initialWithdrawals = [
            { sno: 1, transactionId: "TXN001", amount: 500, commissionPercent: 3, commission: 15, paidAmount: 485, approver: "superadmin", dateTime: "2025-07-17 10:00", remarks: "Approved" }
        ];

        const LoginPage = ({ onLogin, setShowForgotPassword }) => {
            const [username, setUsername] = useState("");
            const [password, setPassword] = useState("");
            const [error, setError] = useState("");

            const handleLogin = (e) => {
                e.preventDefault();
                const users = getUsers();
                const user = users.find(u => u.username === username && u.password === password);
                if (user) {
                    onLogin(user);
                } else {
                    setError("Invalid username or password");
                }
            };

            return (
                <div className="flex items-center justify-center h-screen bg-gray-100">
                    <div className="bg-white p-8 rounded shadow-md w-96">
                        <h2 className="text-2xl font-bold mb-6 text-center">Login</h2>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Username</label>
                                <input
                                    type="text"
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Password</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                />
                            </div>
                            {error && <p className="text-red-500 text-sm">{error}</p>}
                            <button
                                onClick={handleLogin}
                                className="w-full py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                            >
                                Login
                            </button>
                            <p className="text-center text-sm">
                                <a href="#" className="text-indigo-600 hover:underline" onClick={() => setShowForgotPassword(true)}>
                                    Forgot Password?
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        const ForgotPassword = ({ setShowForgotPassword }) => {
            const [username, setUsername] = useState("");
            const [newPassword, setNewPassword] = useState("");
            const [confirmPassword, setConfirmPassword] = useState("");
            const [error, setError] = useState("");
            const [step, setStep] = useState(1); // Step 1: Enter username, Step 2: Set new password

            const handleVerifyUsername = () => {
                const users = getUsers();
                if (users.find(u => u.username === username)) {
                    setStep(2);
                    setError("");
                } else {
                    setError("Username not found");
                }
            };

            const handleResetPassword = () => {
                if (!newPassword || !confirmPassword) {
                    setError("Please fill both password fields");
                    return;
                }
                if (newPassword !== confirmPassword) {
                    setError("Passwords do not match");
                    return;
                }
                const users = getUsers();
                const updatedUsers = users.map(u =>
                    u.username === username ? { ...u, password: newPassword } : u
                );
                saveUsers(updatedUsers);
                alert("Password reset successfully. Please log in with your new password.");
                setShowForgotPassword(false);
            };

            return (
                <div className="flex items-center justify-center h-screen bg-gray-100">
                    <div className="bg-white p-8 rounded shadow-md w-96">
                        <h2 className="text-2xl font-bold mb-6 text-center">
                            {step === 1 ? "Forgot Password" : "Reset Password"}
                        </h2>
                        {step === 1 ? (
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">Username</label>
                                    <input
                                        type="text"
                                        value={username}
                                        onChange={(e) => setUsername(e.target.value)}
                                        className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    />
                                </div>
                                {error && <p className="text-red-500 text-sm">{error}</p>}
                                <button
                                    onClick={handleVerifyUsername}
                                    className="w-full py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                >
                                    Verify Username
                                </button>
                                <p className="text-center text-sm">
                                    <a href="#" className="text-indigo-600 hover:underline" onClick={() => setShowForgotPassword(false)}>
                                        Back to Login
                                    </a>
                                </p>
                            </div>
                        ) : (
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">New Password</label>
                                    <input
                                        type="password"
                                        value={newPassword}
                                        onChange={(e) => setNewPassword(e.target.value)}
                                        className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-gray-700">Confirm Password</label>
                                    <input
                                        type="password"
                                        value={confirmPassword}
                                        onChange={(e) => setConfirmPassword(e.target.value)}
                                        className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    />
                                </div>
                                {error && <p className="text-red-500 text-sm">{error}</p>}
                                <button
                                    onClick={handleResetPassword}
                                    className="w-full py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                >
                                    Reset Password
                                </button>
                                <p className="text-center text-sm">
                                    <a href="#" className="text-indigo-600 hover:underline" onClick={() => setShowForgotPassword(false)}>
                                        Back to Login
                                    </a>
                                </p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const ProfileSettings = ({ user, setUser, users, setUsers }) => {
            const [newUsername, setNewUsername] = useState(user.username);
            const [newPassword, setNewPassword] = useState("");
            const [confirmPassword, setConfirmPassword] = useState("");
            const [error, setError] = useState("");

            const handleUpdateProfile = () => {
                if (!newUsername || (newPassword && !confirmPassword)) {
                    setError("Please fill all required fields");
                    return;
                }
                if (newPassword && newPassword !== confirmPassword) {
                    setError("Passwords do not match");
                    return;
                }
                if (newUsername !== user.username && users.find(u => u.username === newUsername)) {
                    setError("Username already exists");
                    return;
                }

                const updatedUsers = users.map(u =>
                    u.username === user.username
                        ? {
                              ...u,
                              username: newUsername,
                              password: newPassword || u.password
                          }
                        : u
                );
                setUsers(updatedUsers);
                saveUsers(updatedUsers);
                const updatedUser = updatedUsers.find(u => u.username === newUsername);
                setUser(updatedUser);
                localStorage.setItem("user", JSON.stringify(updatedUser));
                setError("");
                setNewPassword("");
                setConfirmPassword("");
                alert("Profile updated successfully");
            };

            return (
                <div className="mb-6 bg-white p-6 rounded shadow">
                    <h2 className="text-xl font-semibold mb-4">Profile Settings</h2>
                    <div className="grid grid-cols-2 gap-4">
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Username</label>
                            <input
                                type="text"
                                value={newUsername}
                                onChange={(e) => setNewUsername(e.target.value)}
                                className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">New Password (optional)</label>
                            <input
                                type="password"
                                value={newPassword}
                                onChange={(e) => setNewPassword(e.target.value)}
                                className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Confirm New Password</label>
                            <input
                                type="password"
                                value={confirmPassword}
                                onChange={(e) => setConfirmPassword(e.target.value)}
                                className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"
                            />
                        </div>
                        <div className="col-span-2">
                            {error && <p className="text-red-500 text-sm mb-2">{error}</p>}
                            <button
                                onClick={handleUpdateProfile}
                                className="w-full py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700"
                            >
                                Update Profile
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const UserManagement = ({ users, setUsers }) => {
            const [newUser, setNewUser] = useState({ username: "", password: "" });

            const handleAddUser = () => {
                if (!newUser.username || !newUser.password) {
                    alert("Please fill both username and password");
                    return;
                }
                if (users.find(u => u.username === newUser.username)) {
                    alert("Username already exists");
                    return;
                }
                const updatedUsers = [...users, { username: newUser.username, password: newUser.password, role: "Master" }];
                setUsers(updatedUsers);
                saveUsers(updatedUsers);
                setNewUser({ username: "", password: "" });
            };

            return (
                <div className="mb-6 bg-white p-6 rounded shadow">
                    <h2 className="text-xl font-semibold mb-4">User Management (Super Master Only)</h2>
                    <div className="grid grid-cols-2 gap-4">
                        <input
                            type="text"
                            placeholder="New Master Username"
                            value={newUser.username}
                            onChange={(e) => setNewUser({ ...newUser, username: e.target.value })}
                            className="px-3 py-2 border rounded"
                        />
                        <input
                            type="password"
                            placeholder="New Master Password"
                            value={newUser.password}
                            onChange={(e) => setNewUser({ ...newUser, password: e.target.value })}
                            className="px-3 py-2 border rounded"
                        />
                        <button
                            onClick={handleAddUser}
                            className="col-span-2 py-2 px-4 bg-green-600 text-white rounded hover:bg-green-700"
                        >
                            Add Master User
                        </button>
                    </div>
                    <h3 className="text-lg font-semibold mt-4">Current Master Users</h3>
                    <table className="w-full border-collapse border mt-2">
                        <thead>
                            <tr className="bg-gray-200">
                                <th className="border p-2">Username</th>
                                <th className="border p-2">Role</th>
                            </tr>
                        </thead>
                        <tbody>
                            {users.filter(u => u.role === "Master").map(u => (
                                <tr key={u.username}>
                                    <td className="border p-2">{u.username}</td>
                                    <td className="border p-2">{u.role}</td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            );
        };

        const TransactionManagement = ({ user, setUser, onLogout, users, setUsers }) => {
            const [transactions, setTransactions] = useState(initialTransactions);
            const [withdrawals, setWithdrawals] = useState(initialWithdrawals);
            const [newTransaction, setNewTransaction] = useState({
                customer: "", amount: "", fromVPA: "", payerName: ""
            });
            const [newWithdrawal, setNewWithdrawal] = useState({ transactionId: "", amount: "" });

            const handleAddTransaction = () => {
                if (!newTransaction.customer || !newTransaction.amount || !newTransaction.fromVPA || !newTransaction.payerName) {
                    alert("Please fill all transaction fields");
                    return;
                }
                const newTxn = {
                    sno: transactions.length + 1,
                    id: `TXN${String(transactions.length + 1).padStart(3, '0')}`,
                    ...newTransaction,
                    amount: parseFloat(newTransaction.amount),
                    enteredBy: user.username
                };
                setTransactions([...transactions, newTxn]);
                setNewTransaction({ customer: "", amount: "", fromVPA: "", payerName: "" });
            };

            const handleDeleteTransaction = (sno) => {
                setTransactions(transactions.filter(txn => txn.sno !== sno));
            };

            const handleEditTransaction = (sno, updatedTxn) => {
                setTransactions(transactions.map(txn => txn.sno === sno ? { ...txn, ...updatedTxn } : txn));
            };

            const handleAddWithdrawal = () => {
                if (!newWithdrawal.transactionId || !newWithdrawal.amount) {
                    alert("Please fill all withdrawal fields");
                    return;
                }
                const amount = parseFloat(newWithdrawal.amount);
                const commission = amount * 0.03;
                const paidAmount = amount - commission;
                const newW = {
                    sno: withdrawals.length + 1,
                    transactionId: newWithdrawal.transactionId,
                    amount,
                    commissionPercent: 3,
                    commission,
                    paidAmount,
                    approver: user.username,
                    dateTime: new Date().toISOString().slice(0, 16).replace("T", " "),
                    remarks: "Approved"
                };
                setWithdrawals([...withdrawals, newW]);
                setNewWithdrawal({ transactionId: "", amount: "" });
            };

            const totalTransactions = transactions.length;
            const totalAmount = transactions.reduce((sum, txn) => sum + txn.amount, 0);
            const totalPaidAmount = withdrawals.reduce((sum, w) => sum + w.paidAmount, 0);
            const totalCommission = withdrawals.reduce((sum, w) => sum + w.commission, 0);

            return (
                <div className="container mx-auto p-4">
                    <div className="flex justify-between items-center mb-6">
                        <h1 className="text-3xl font-bold">Transaction Management ({user.role})</h1>
                        <button
                            onClick={onLogout}
                            className="py-2 px-4 bg-red-600 text-white rounded-md hover:bg-red-700"
                        >
                            Logout
                        </button>
                    </div>

                    {/* Profile Settings */}
                    <ProfileSettings user={user} setUser={setUser} users={users} setUsers={setUsers} />

                    {/* User Management Section (Super Master Only) */}
                    {user.role === "Super Master" && (
                        <UserManagement users={users} setUsers={setUsers} />
                    )}

                    {/* Transaction Entry Form (Master and Super Master) */}
                    {user.role === "Master" || user.role === "Super Master" ? (
                        <div className="mb-6 bg-white p-6 rounded shadow">
                            <h2 className="text-xl font-semibold mb-4">Add Transaction</h2>
                            <div className="grid grid-cols-2 gap-4">
                                <input
                                    type="text"
                                    placeholder="Customer"
                                    value={newTransaction.customer}
                                    onChange={(e) => setNewTransaction({ ...newTransaction, customer: e.target.value })}
                                    className="px-3 py-2 border rounded"
                                />
                                <input
                                    type="number"
                                    placeholder="Amount"
                                    value={newTransaction.amount}
                                    onChange={(e) => setNewTransaction({ ...newTransaction, amount: e.target.value })}
                                    className="px-3 py-2 border rounded"
                                />
                                <input
                                    type="text"
                                    placeholder="From VPA"
                                    value={newTransaction.fromVPA}
                                    onChange={(e) => setNewTransaction({ ...newTransaction, fromVPA: e.target.value })}
                                    className="px-3 py-2 border rounded"
                                />
                                <input
                                    type="text"
                                    placeholder="Payer Name"
                                    value={newTransaction.payerName}
                                    onChange={(e) => setNewTransaction({ ...newTransaction, payerName: e.target.value })}
                                    className="px-3 py-2 border rounded"
                                />
                                <button
                                    onClick={handleAddTransaction}
                                    className="col-span-2 py-2 px-4 bg-green-600 text-white rounded hover:bg-green-700"
                                >
                                    Add Transaction
                                </button>
                            </div>
                        </div>
                    ) : null}

                    {/* Transaction Table */}
                    <div className="mb-6">
                        <h2 className="text-xl font-semibold mb-4">Transaction Details</h2>
                        <table className="w-full border-collapse border">
                            <thead>
                                <tr className="bg-gray-200">
                                    <th className="border p-2">SNO</th>
                                    <th className="border p-2">TRANSACTION ID</th>
                                    <th className="border p-2">CUSTOMER</th>
                                    <th className="border p-2">AMOUNT</th>
                                    <th className="border p-2">FROM VPA</th>
                                    <th className="border p-2">PAYER NAME</th>
                                    <th className="border p-2">ENTERED BY</th>
                                    {user.role === "Super Master" && <th className="border p-2">ACTIONS</th>}
                                </tr>
                            </thead>
                            <tbody>
                                {transactions.map(txn => (
                                    <tr key={txn.sno}>
                                        <td className="border p-2">{txn.sno}</td>
                                        <td className="border p-2">{txn.id}</td>
                                        <td className="border p-2">{txn.customer}</td>
                                        <td className="border p-2">₹{txn.amount}</td>
                                        <td className="border p-2">{txn.fromVPA}</td>
                                        <td className="border p-2">{txn.payerName}</td>
                                        <td className="border p-2">{txn.enteredBy}</td>
                                        {user.role === "Super Master" && (
                                            <td className="border p-2">
                                                <button
                                                    onClick={() => handleEditTransaction(txn.sno, {
                                                        customer: prompt("New Customer", txn.customer),
                                                        amount: parseFloat(prompt("New Amount", txn.amount)),
                                                        fromVPA: prompt("New VPA", txn.fromVPA),
                                                        payerName: prompt("New Payer Name", txn.payerName)
                                                    })}
                                                    className="mr-2 py-1 px-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                                >
                                                    Edit
                                                </button>
                                                <button
                                                    onClick={() => handleDeleteTransaction(txn.sno)}
                                                    className="py-1 px-2 bg-red-600 text-white rounded hover:bg-red-700"
                                                >
                                                    Delete
                                                </button>
                                            </td>
                                        )}
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>

                    {/* Settlement Section */}
                    <div className="mb-6 bg-white p-6 rounded shadow">
                        <h2 className="text-xl font-semibold mb-4">Settlement</h2>
                        <div className="grid grid-cols-2 gap-4">
                            <p><strong>Total Transactions:</strong> {totalTransactions}</p>
                            <p><strong>Total Amount:</strong> ₹{totalAmount}</p>
                            <p><strong>Total Paid Amount:</strong> ₹{totalPaidAmount}</p>
                            <p><strong>Total Commission Amount:</strong> ₹{totalCommission}</p>
                        </div>
                    </div>

                    {/* Withdrawal Section */}
                    <div className="mb-6">
                        <h2 className="text-xl font-semibold mb-4">Withdrawal</h2>
                        {user.role === "Super Master" && (
                            <div className="mb-4 bg-white p-6 rounded shadow">
                                <h3 className="text-lg font-semibold mb-2">Add Withdrawal</h3>
                                <div className="grid grid-cols-2 gap-4">
                                    <input
                                        type="text"
                                        placeholder="Transaction ID"
                                        value={newWithdrawal.transactionId}
                                        onChange={(e) => setNewWithdrawal({ ...newWithdrawal, transactionId: e.target.value })}
                                        className="px-3 py-2 border rounded"
                                    />
                                    <input
                                        type="number"
                                        placeholder="Amount"
                                        value={newWithdrawal.amount}
                                        onChange={(e) => setNewWithdrawal({ ...newWithdrawal, amount: e.target.value })}
                                        className="px-3 py-2 border rounded"
                                    />
                                    <button
                                        onClick={handleAddWithdrawal}
                                        className="col-span-2 py-2 px-4 bg-green-600 text-white rounded hover:bg-green-700"
                                    >
                                        Add Withdrawal
                                    </button>
                                </div>
                            </div>
                        )}
                        <table className="w-full border-collapse border">
                            <thead>
                                <tr className="bg-gray-200">
                                    <th className="border p-2">SNO</th>
                                    <th className="border p-2">TRANSACTION ID</th>
                                    <th className="border p-2">AMOUNT</th>
                                    <th className="border p-2">COMMISSION %</th>
                                    <th className="border p-2">COMMISSION</th>
                                    <th className="border p-2">PAID AMT.</th>
                                    <th className="border p-2">APPROVER</th>
                                    <th className="border p-2">DATE & TIME</th>
                                    <th className="border p-2">REMARKS</th>
                                </tr>
                            </thead>
                            <tbody>
                                {withdrawals.map(w => (
                                    <tr key={w.sno}>
                                        <td className="border p-2">{w.sno}</td>
                                        <td className="border p-2">{w.transactionId}</td>
                                        <td className="border p-2">₹{w.amount}</td>
                                        <td className="border p-2">{w.commissionPercent}%</td>
                                        <td className="border p-2">₹{w.commission}</td>
                                        <td className="border p-2">₹{w.paidAmount}</td>
                                        <td className="border p-2">{w.approver}</td>
                                        <td className="border p-2">{w.dateTime}</td>
                                        <td className="border p-2">{w.remarks}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [users, setUsers] = useState(getUsers());
            const [showForgotPassword, setShowForgotPassword] = useState(false);

            useEffect(() => {
                const storedUser = localStorage.getItem("user");
                if (storedUser) {
                    setUser(JSON.parse(storedUser));
                }
            }, []);

            const handleLogin = (user) => {
                setUser(user);
                localStorage.setItem("user", JSON.stringify(user));
            };

            const handleLogout = () => {
                setUser(null);
                localStorage.removeItem("user");
            };

            return showForgotPassword ? (
                <ForgotPassword setShowForgotPassword={setShowForgotPassword} />
            ) : user ? (
                <TransactionManagement user={user} setUser={setUser} onLogout={handleLogout} users={users} setUsers={setUsers} />
            ) : (
                <LoginPage onLogin={handleLogin} setShowForgotPassword={setShowForgotPassword} />
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>